# 🤖 Gemini AI 聊天功能實現

## 概述

本專案已成功整合 Google Gemini API，實現了自然對話的AI教練聊天功能。用戶可以與AI進行自然、流暢的對話，獲得專業的運動建議和情感支持。

## 功能特色

### ✨ 主要功能
- **自然對話**: 使用 Gemini 1.5 Flash 模型，提供流暢的中文對話體驗
- **專業教練**: AI化身為專業的三鐵運動教練「小鐵」
- **多領域支援**: 涵蓋訓練計劃、營養建議、傷害預防、心理調適等
- **友善互動**: 具備同理心，可進行日常聊天和情感支持
- **即時回應**: 打字動畫效果，提升用戶體驗

### 🎯 專業領域
- 三鐵運動訓練（游泳、騎車、跑步）
- 運動營養建議
- 訓練計劃制定
- 運動傷害預防
- 心理調適支持
- 一般生活聊天

## 技術實現

### 🔧 API 配置
```javascript
const GEMINI_API_KEY = 'AIzaSyD_BEBcsgNGCY-3ntYVdUdVDeHV39GKdlA';
const GEMINI_MODEL = 'gemini-1.5-flash';
```

### 📁 文件結構
```
chat/
├── chat_gemini.html          # 主要的Gemini聊天頁面
└── chat_v5_CT226.html        # 原有的課表聊天頁面

test_gemini.html              # API測試頁面
README_GEMINI.md              # 本說明文件
```

### 🎨 UI/UX 特色
- **現代化設計**: 漸層背景、毛玻璃效果
- **響應式佈局**: 適配各種螢幕尺寸
- **動畫效果**: 訊息淡入、打字指示器
- **直觀導航**: 底部導航欄，方便切換功能

## 使用方法

### 🚀 快速開始
1. 打開 `chat/chat_gemini.html` 或從主頁點擊「聊天」按鈕
2. 在輸入框中輸入你想說的話
3. 按 Enter 鍵或點擊發送按鈕
4. 享受與AI教練的自然對話！

### 🧪 測試功能
1. 打開 `test_gemini.html` 進行API功能測試
2. 輸入任意訊息測試回應
3. 檢查控制台是否有錯誤訊息

## API 參數配置

### 🔥 生成配置
```javascript
generationConfig: {
    temperature: 0.7,        // 創意度 (0-1)
    topK: 40,               // 詞彙多樣性
    topP: 0.95,             // 核採樣
    maxOutputTokens: 800,   // 最大輸出長度
}
```

### 🛡️ 安全設定
- 騷擾內容過濾
- 仇恨言論過濾
- 色情內容過濾
- 危險內容過濾

## 系統提示詞

AI教練「小鐵」的個性設定：
- 專業且友善的三鐵運動教練
- 具備同理心，像朋友般親切
- 提供實用且簡潔的建議
- 支援繁體中文對話
- 自然流暢的對話風格

## 聊天歷史管理

- 自動保存對話歷史
- 限制歷史記錄長度（最多20條）
- 支援上下文連續對話
- 防止記憶體溢出

## 錯誤處理

### 🔍 常見問題
1. **API 請求失敗**: 檢查網路連接和API金鑰
2. **回應格式錯誤**: 檢查API版本和參數
3. **CORS 錯誤**: 確保正確的請求頭設定

### 🛠️ 除錯方法
- 查看瀏覽器控制台錯誤訊息
- 使用 `test_gemini.html` 進行獨立測試
- 檢查網路請求狀態

## 未來改進

### 🚀 計劃功能
- [ ] 語音輸入/輸出
- [ ] 圖片識別和分析
- [ ] 個人化訓練建議
- [ ] 多語言支援
- [ ] 離線模式

### 🔧 技術優化
- [ ] 實現對話持久化存儲
- [ ] 添加用戶偏好設定
- [ ] 優化回應速度
- [ ] 增強安全性

## 注意事項

### ⚠️ 重要提醒
1. **API 金鑰安全**: 請妥善保管API金鑰，避免公開暴露
2. **使用限制**: 注意API的請求頻率限制
3. **內容過濾**: 系統會自動過濾不當內容
4. **隱私保護**: 對話內容僅用於即時回應，不會永久存儲

### 💡 最佳實踐
- 定期更新API金鑰
- 監控API使用量
- 備份重要對話內容
- 定期測試功能穩定性

## 技術支援

如有問題或建議，請：
1. 檢查本說明文件
2. 使用測試頁面進行除錯
3. 查看瀏覽器控制台錯誤訊息
4. 聯繫開發團隊

---

**版本**: 1.0.0  
**更新日期**: 2024年12月  
**技術**: HTML5, CSS3, JavaScript, Gemini API 